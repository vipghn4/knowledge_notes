---
title: 6. External memory
tags: Computer architecture
---

<!-- TOC titleSize:2 tabSpaces:2 depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 skip:0 title:1 charForUnorderedList:* -->
## Table of Contents
- [External memory](#external-memory)
  - [Magnetic disk](#magnetic-disk)
    - [Magnetic read and write mechanisms](#magnetic-read-and-write-mechanisms)
    - [Data organization and formatting](#data-organization-and-formatting)
    - [Physical characteristics](#physical-characteristics)
    - [Disk performace parameters](#disk-performace-parameters)
  - [RAID](#raid)
    - [RAID level 0](#raid-level-0)
    - [RAID level 1](#raid-level-1)
    - [RAID level 2](#raid-level-2)
    - [RAID level 3](#raid-level-3)
    - [RAID 4](#raid-4)
    - [RAID 5](#raid-5)
    - [RAID 6](#raid-6)
    - [Usage of RAID algorithms](#usage-of-raid-algorithms)
  - [Solid state drives](#solid-state-drives)
    - [Flash memory](#flash-memory)
    - [SSD compared to HDD](#ssd-compared-to-hdd)
    - [SSD organization](#ssd-organization)
    - [Practical issues](#practical-issues)
  - [Optical memory](#optical-memory)
    - [Compact disk](#compact-disk)
    - [Digital versatile disk (DVD)](#digital-versatile-disk-dvd)
    - [High-definition optical disks](#high-definition-optical-disks)
  - [Magnetic tape](#magnetic-tape)
- [Appendix](#appendix)
  - [Concepts](#concepts)
<!-- /TOC -->

# External memory
## Magnetic disk
**Disk**. A circular platter constructed of nonmagnetic material, called the substrate, coated with a magnetizable material
* *Substrate material*. 
    * *Traditional material*. Aluminum or aluminium alloy material
    * *Trending*. More recently, glass substrates have been introduced with the following benefits
        * Improvement in the uniformity of the magnetic film surface to increase disk reliability
        * A significant reduction in overall surface defects to help reduce read-write errors
        * Ability to support lower fly heights
        * Better stiffness to reduce disk dynamics
        * Greater ability to withstand shock and damage

### Magnetic read and write mechanisms
**Disk head**. Data are recorded on and retrieved later from the disk via a conducting coil named the head

<div style="text-align:center">
    <img src="https://i.imgur.com/vckhxnD.png">
    <figcaption>Inductive write / magnetoresistive read head</figcaption>
</div>

* *Types of heads*. In many systems, there are two heads, i.e. a read head and a write head

    $\to$ During a read or write operation, the head is stationary while the platter rotates beneath it
* *Writing mechanism*. Exploit the fact that electricity flowing through a coil produces a magnetic field
    * *Idea*. Electric pulses are sent to the write head
        
        $\to$ The resulting magnetic patterns are recorded on the surface below, with different patterns for positive and negative currents
    * *Write head structure and material*.
        * *Material*. The write head is made of easily magnetizable material
        * *Structure*. The write head is in the shape of a rectangular doughnut with a gap along one side and a few turns of conducting wire along the opposite side

            $\to$ An electric current in the wire induces a magnetic field across the gap, which in tern magnetizes a small area of the recording medium
    * *Direction of magnetization on the recording medium*. Reversing the direction of the current reverses the direction of magnetization on the recording medium
* *Reading mechanism*. Exploit the fact that a magnetic field moving relative to a coil produces an electrical current in the coil
    * *Explain*. When the surface of the disk passes under the head, it generates a current of the same polarity as the one already recorded
    * *Read head structure and material*. Eseentially the same as for writing

        $\to$ The same head can be used for both writing and reading

**Contemporary rigid disk systems**. Use a different read mechanism, requiring a separate read head, positioned for convenience close to the write head
* *Read head structure*. Consist of partially shielded magnetoresistive (MR) sensor
    * *MR material*. Have an electrial resistance which depends on the direction of the magnetization of the medium moving under it
* *Reading mechanisms*. By passing the current through the MR sensor, resistance changes are detected as voltage signals
* *Benefits*. Allow higher-frequency operation, which leads to greater storage densities and operating speeds

### Data organization and formatting

<div style="text-align:center">
    <img src="https://i.imgur.com/fH2FR9z.png">
    <figcaption>Disk data layout</figcaption>
</div>

**Tracks**. The head is relatively small device capable of reading from or writing to a portion of the platter rotating beneath it

$\to$ This gives rise to the organization of data on the platter in a concentric set of rings, called tracks
* *Track width*. Each track is the same width as the head
* *Number of tracks*. Thousands of tracks per surface

**Gaps**. Adjacent tracks are separated by gaps, which prevents, at least minimizes, errors due to misalignment of the head, or simply interference of magnetic fields

**Sectors**. Data are transferred to and from disk in sectors as given the the figure above
* *Number of sectors per track*. Hundreds of sectors per track
* *Sector length*. There may be either fixed or variable sector lengths
* *Intratrack gaps*. To avoid imposign unreasonable precision requirements on the system

    $\to$ Adjacent sectors are seperated by intratrack (intersector) gaps

**Bit reading rate across disk regions**.

<div style="text-align:center">
    <img src="https://i.imgur.com/LvKqiTW.png">
    <figcaption>Disk layout methods</figcaption>
</div>

* *Problem*. A bit near the center of a rotating disk travels past a fixed point, e.g. a read-write head, slower than a bit on the outside

    $\to$ Some way must be found to compensate for the variation in speed, so that the head can read all the bits at the same rate
* *Constant angular velocity (CAV) method*. Increase the spacing between bits of information recorded in segments of the disk

    $\to$ The information can then be scanned at the same rate by rotating the disk at a fixed speed
    * *Drawback*. The amount of data which can be stored on the long outer tracks is only the same as what can be stored on the short inner tracks

        $\to$ Disk storage capacity in straightforward CAV system is limited by the maximum recording density which can be achieved on the innermost track
* *Multiple zone recording*. A technique used by most modern hard disk systems to increase density
    * *Idea*. The surface is divided into a number of concentric zones, e.g. 16
        * Within a zone, the number of bits per track is constant
        * Zones farther from the center contain more bits, i.e. more sectors, than zones closer to the centers
    * *Trade-off*. Allow for greater overall storage capacity at the expense of more complex circuitry
        * *Explain*. As the disk head moves from one zone to another, the length (along the track) of individual bits changes
            
            $\to$ This causes a change in the timing for reads and writes
    * *Control data*. Some means is required to locate sector positions within a track
        
        $\to$ Thre must be some starting point on the track, and a way of identifying the start and end of each sector
        * *Idea*. Use control data recorded on the disk
        * *Consequence*. The disk is formatted with some extra data used only by the disk drive and not accessible to the user

**An example of disk formatting**.

<div style="text-align:center">
    <img src="https://i.imgur.com/g3VieqN.png">
    <figcaption>Winchester disk format</figcaption>
</div>

* *Track structure*. Each track contains 30 fixed-length sectors of 600 bytes each
* *Sector structure*. Each sector holds 512 bytes of data, plus control information useful to the disk controller
    * *ID field*. A unique identifier or address used to locate a particular sector
    * *SYNCH byte*. A special bit pattern which delimits the beginning of the field
    * *Track number*. Identify a track on a surface
    * *Head number*. Identify a head, i.e. this disk has multiple surfaces
    * *Error detecting code*. The ID and data fields each contain an CRC error detecting code

### Physical characteristics
**Disk drive**. The disk is mounted in a disk drive, which consists of an arm, a spindle which rotates the disk, and the electronics required for input and output of binary data

**Fixed or moveable head w.r.t the radial direction of the platter**.
* *Fixed-head disk*. There is one read-write head per track, all of the heads are mounted on a rigid arm which extends across all tracks
    
    >**NOTE**. These systems are rare today

* *Moveable-head disk*. There is only one read-write head mounted on an arm, which must be able to be positioned above any track

    $\to$ The arm can be extended or retracted for this purpose

**Removable and nonremovable disks**.
* *Nonremovable disk*. Permanently mounted in the disk drive
    * *Example*. The hard disk in a personal computer
* *Removable disk*. Can be removed and replaced with another disk
    * *Pros*. 
        * Unlimited amounts of data are availbable with a limited number of disk systems
        * A disk can be moved form one computer to another
    * *Example*. Floppy disks and ZIP cartridge disks

**Magnetizability**.
* *Double-sided disks*. The magnetizable coating is applied to both sides of the platter
* *Single-sided disks*. The magnetizable coating is applied to one side of the platter

**Number of platters**. Some disk drives accommodate multiple platters stacked vertically a fraction of an inch apart

<div style="text-align:center">
    <img src="https://i.imgur.com/QC1Y1gG.png">
    <figcaption>Components of a disk drive</figcaption>
</div>

* *Arm*. Multiple arms are provided
* *Head*. Multiple-platter disks employ a moveable head, with one read-write head per platter surface
    * *Head cooperation*. All of the heads are mechanically fixed so that all are at the same distance from the center of the disk and move together

        $\to$ At any time, all of the heads are positioned over tracks, which are of equal distance from the center of the disk
    * *Cylinder*. The set of all the tracks in the same relative position on the platter

**Types of disks**. The head mechanism provides a classification of disks into three types
* *Traditional disk*. The read-write head has been positioned a fixed distance above the platter, allowing an air gap
* *Floppy disk*. A head mechanism actually comes into physical contect with the medium during a read or write operation

    $\to$ This results in a small, flexible platter, and the least expensive type of disk 
* *Disks with Winchester heads*.
    * *Data density and air gap size relationship*. The head must generate or sense an electromagnetic field of sufficient magnitude to write and read properly
        * *Pros of narrower heads*.
            * Require closer distance to the platter surface
            * The tracks are narrower and thus greater data density, which is desirable
        * *Cons of narrower heads*.
            * The greater the risk of error from impurities or imperfections
    * *Winchester heads*. Used in sealed drive assemblies which are almost free of contaminants

        $\to$ They are designed to operate closer to the disk's surface than conventional rigid disk heads, thus allowing greater data density
        * *Head structure*. An aerodynamic foil resting lightly on the platter's surface when the disk is motionless

            $\to$ The air pressure generated by a spinning disk is enough to make the foil rise above the surface

### Disk performace parameters
**Disk operation**. When a disk drive is operating, the disk is rotating at constant speed
* *Read and write operations*.  The head must be positioned at the desired track and at the beginning of the desired sector on the track
    * *Track selection*. 
        * *Moveable-head systems*. Involve moving the head
        * *Fixed-head systems*. Involve electronically selecting one head of the system

**Timing of a disk I/O transfer**.

<div style="text-align:center">
    <img src="https://i.imgur.com/p4S3wL8.png">
    <figcaption>Timing of a disk I/O transfer</figcaption>
</div>

* *Seek time (for moveable-head systems only)*. The time it takes to position the head at the track
* *Rotational delay (or rotational latency)*. Once the track is selected, the disk controller waits until the appropriate sector rotates to line up with the head

    $\to$ The time it takes for the beginning of the sector to read the head is the rotational delay
* *Access time*. The time it takes to get into position to read or write
    * *Formal*. The sum of seek time, if any, and the rotational delay
* *Transfer time*. Once the head is in position, the read or write operation is performed as the sector moves under the head

    $\to$ This is the data transfer portion of the operation
    * *Transfer time*. The time required for the data transfer
* *Additional delay*.
    * When a process issues an I/O request, it must wait in a queue for the device to be available

        $\to$ At that time, the device is assigned to the process
    * If the process shares a single I/O channel, or a set of I/O channels, with other disk drives

        $\to$ The process must wait for the channel to be available

**Rotational positional sensing (RPS)**. In some high-end sytems for the servers, RPS is used
* *Mechanism*.
    1. When the seek command has been issued, the channel is released to handle other I/O operations
    2. When the seek is completed, the device determines when the data will rotate under the head
    3. As the sector approaches the head, the device tries to reestablish the communication path back to the host
    4. If the control unit or the channel is busy with another I/O

        $\to$ The reconnection attempt fails and the device must rotate one whole revolution, before it can attempt to reconnect, i.e. an RPS miss
* *Consequence*. The extra delay element of RPS misses must be added to the timeline of a disk I/O

**Total average access time**. 
* *Assumptions*.
    * $T_s$ is the average seek time
    * $r$ is the rotation speed, in revolutions per second
    * $b$ is the number of bytes to transferred
    * $N$ is the number of bytes on a track
* *Total average access time*. $T_a=T_s+\frac{1}{2r} + \frac{b}{rN}$

**Disk scheduling algorithms**. The order, in which sectors are read from the disk has a tremendous effect on I/O performance

$\to$ It is worthwhile to examine ways, in which the performance of disk I/O can be improved over that achieved by purely random access to the disk

## RAID
**Problem**. The improvement rate of secondary storage performance has been considerably less than the rate for processors and main memory

$\to$ This mismatch has made the disk storage system perhaps the main focus of concern in improving overall computer system performance
* *Idea*. If one component can only be pushed so far, additional gains in performance can be obtained by using multiple parallel components

    $\to$ This leads to development of arrays of disks operating independently and in parallel
* *Consequence*. 
    * I/O requests can be handled in parallel, as long as the data required reside on separate disks
    * A single I/O request can be executed in parallel if the block of data to be accessed is distributed across multiple disks
    * Redundancy can be added to improve reliability

**Redundant array of independent disks (RAID)**. Industry has agreed on a standardized scheme for multiple-disk database design
* *Motivation*. There is wide variety of ways, in which the data can be organized

    $\to$ This could make it difficult to develop database schemes, which are usable on a number of platforms and OSes
* *Overall structure*. The RAID scheme consists of 7 levels, from 0 to 6, which designate different architectures which share three common characteristics
    * RAID is a set of physical disk drives viewed by the OS as a single logical drive
    * Data are distributed across the physical drives of an array, in a scheme known as striping (described subsequently)
    * Redundant disk capacity is used to store parity information, which guarantees data recoverability in case of a disk failure

    >**NOTE**. RAID 0 and RAID 1 do not support the third characteristics

* *Original purpose*. The RAID strategy employs multiple disk drives and distributes data to enable simultaneous access to data from multiple drives

    $\to$ This improves I/O performance and allows easier incremental increases in capacity
    * *Problem*. Allowing multiple heads and actuators to operate simultaneously achieves higher I/O and transfer rates, but increases the probability of failure
    * *Solution*. Store and use parity information which enables the recovery of data lost due to a disk failure

**RAID levels**. 

<div style="text-align:center">
    <img src="https://i.imgur.com/eMhPQwJ.png">
    <figcaption>RAID levels</figcaption>
</div>

<div style="text-align:center">
    <img src="https://i.imgur.com/KVC7iI1.png">
    <figcaption>RAID levels</figcaption>
</div>

<div style="text-align:center">
    <img src="https://i.imgur.com/TfLJ4Kj.png">
    <figcaption>RAID levels</figcaption>
</div>

### RAID level 0

>**NOTE**. RAID 0 is not a true member of the RAID family since it does not include redundancy to improve performance
>$\to$ There are a few applications, e.g. supercomputers, in which performance and capacity are primary concerns, and low cost is more important than improved reliability

**RAID 0 as a distributed system**. The user and system data are distributed across all of the disks in the array
* *Advantage over a single large disk*. If two different I/O requests are pending for two different blocks of data, it is likely that the requested blocks are on different disks  

    $\to$ Two requests can be issued in parallel, reducing the I/O queuing time
* *Stripping*. In RAID 0, the data are stripped across the available disks

    <div style="text-align:center">
        <img src="https://i.imgur.com/K0vTQxl.png">
        <figcaption>Strip mapping in RAID 0</figcaption>
    </div>

    * *Explain*. All of the user and system data are viewed as being stored on a logical disk, which is divided into strips
        * *Strip*. Can be physical blocks, sectors, or some other unit
    * *Strip mapping*. The strips are mapped round robin to consecutive physical disks in the RAID array
    * *Stripe*. A set of logically consecutive strips which maps exactly one strip to each array member
* *Example*. Consider an $n$-disk array 
    * *First stripe*. The first $n$ logical strips are physically stored as the first strip on each of the $n$ disks

        $\to$  This forms the first stripe
    * *Second stripe*. The second $n$ logical strips distributed as the second strips on each disk

        $\to$ This forms the second stripe
    * *Other stripes*. Work in the same order as the first and the second stripes
* *Advantage of stripe layout*. If a single I/O request consists of multiple logical contiguous strips

    $\to$ Up to $n$ strips for that request can be handled in parallel, greatly reducing the I/O transfer time

**Usages of RAID 0**.
* For high data transfer capacity
* For high I/O request rate

### RAID level 1
**Redundancy**. Redundancy in RAID 1 is achieved by the simple expedient of duplicating all the data
* *Data stripping*. Data stripping is used, as in RAID 0
    * *Strip duplication*. Each strip is mapped to two separate physical disks so that every disk in the array has a mirror disk containing the same data
    
    >**NOTE**. RAID 1 can also be implemented without data stripping, but this is less common

**Pros and cons**.
* *Pros*.
    * A read request can be serviced by either of the two disks containing the requested data, whichever involves the minimum seek time plus rotational latency
    * A write request requires that both corresponding strips be updated, but this can be done in parallel

        $\to$ The write performance is dictated by the slower of the two writes, i.e. the one with larger seek time plus rotational latency
    * Recovery from a failure is simple, i.e. when a drive fails, the data may still be accessed from the second drive
* *Cons*. The cost is high, i.e. it requires twice the disk space of the logical disk that it supports

**Usage**. A RAID 1 configuration is likely to be limited to drives, which store system software and data and other highly critical files
* *Explain*. RAID 1 provides real-time copy of all data so that when there is a disk failure, all critical data are still immediately available

**RAID 1 in transaction-oriented environment**. 
* *Read-intensive systems*. RAID 1 can achieve high I/O request rates of the bulk of the requests are reads

    $\to$ In this case, the performance of RAID 1 can approach double of that of RAID 0
* *Write-intensive systems*. If a substantial fraction of the I/O requests are write requests

    $\to$ There may be no significant performance gain over RAID 0

### RAID level 2
**Idea**. Use very smapp strips, and a Hamming-code parity to provide redundancy

**Parallel access technique**. RAID 2 and RAID 3 makes use of parallel access techniques
* *Parallel access technique*. All member disks participate in the execution of every I/O request
* *Disk head synchronization*. The spindles of the invididual drives are typically synchronized so that each disk head is in the same position on each disk at any given time

    $\to$ Different disks cannot be accessed simultaneously

**Data stripping**. Data stripping is used in RAID 2 and RAID 3, with strip size very small, i.e. a single byte or word
* *Error-correcting code*. Computed across correpsonding bits on each data disk, then stored in the corresponding bit positions on multiple parity disks
    * *Implementation*. Use a Hamming code

>**NOTE**. This level is of historical significance only, although it was used on some early machines. As of 2014, it is not used by any commercial available system

**Number of redundant disks**. Proportional to the log of the number of data disks

$\to$ RAID 2 requires fewer disks than RAID 1, but it is still rather costly
* *Explain*. 
    * As given in the Hamming code section, if we use a $K$-bits ECC for each $M$-bits word, the condition $2^K-1\geq M+K$ must be satisfied

        $\to$ $K\geq \log_2 (M+K+1)$ must be satisfied
    * We have that $2^M-1 \geq 2M$ when $M\geq 3$ or $M \leq 0$ and $2^M-1 < 2M$ when $M\in\{0,1\}$

        $\to$ If $M\geq 3$ then $K\leq \log_2 (2M+1) \in O(\log_2 M)$
* *Consequence*. Choosing strip size $M \geq 3$ will results in $K\in O(\log_2 M)$

**Operations**.
* *Reading*. 
    1. On a single read, all disks are simultaneously accessed

        $\to$ The requested data and the associated ECC are delivered to the array controller
    2. If there is a single-bit error, the controller can recognize and correct the error instantly

        $\to$ The read access time is not slowed
* *Writing*. All data disks and parity disks must be accessed for the write operation

**Usage**. Only effective choice in an environment where many disk errors occur

>**NOTE**. Given the high reliability of individual disks and disk drives, RAID 2 is overkill and is not implemented

### RAID level 3
**Idea**. Similar to RAID 2, but RAID 3 only requires a single redundant disk, no matter how large the disk array
* *Parallel access*. RAID 3 employs parallel access, with data distributed in small strips
* *Parity bit*. Instead of an ECC, a simple parity bit is computed for the set of individual bits in the same position on all of the data disks

**Redundancy**. If there is a drive failure, the parity drive is accessed and data is reconstructed from the remaining devices

$\to$ Once the failed drive is replaced, the missing data can be restored on the new drive and operation resumed
* *Key ideas*.
    * $X_1 \oplus X_2 = X_2 \oplus X_1$
    * $X_1 \oplus 0 = X_1$
* *Data reconstruction*. 
    * *Parity bit for the $i$th bit*. $X_N(i)=X_0(i)\oplus X_1(i) \oplus \dots \oplus X_{N-1}(i)$
    * *Error correction for bit $i$ on disk $1$*. $X_1(i)=X_0(i)\oplus X_2(i)\oplus X_3(i)\dots \oplus X_{N-1}(i) \oplus X_N(i)$

        $\to$ The contents of each strip of data on $X_1$ can be regenerated from the contents of the corresponding strips on the remaining disks in the array

* *Reduced mode*. When there is a disk failure, all of the data are still available in the reduced mode
    * *Reduced mode*. In this mode, 
        * For reads, the missing data are regenerated on the fly using XOR calculation
        * For writes, consistency of the parity must be maintained for later regeneration
    * *Returning to full operation mode*. Require that the failed disk be replaced and the entire contents of the failed disk be regenerated on the new disk

**Performance**.
* *Data transfer rates*. Since the data are striped in very small strips, RAID 3 can achieve very high data transfer rates
* *Parallel data transfer*. Any I/O request will involve the parallel transfer of data from all of the data disks

    >**NOTE**. For large transfers, the performance improvement is especially noticeable

* *Concurrent data transfer*. Only one I/O request can be executed at a time

    $\to$ In a transaction-oriented environment, performance suffers

### RAID 4
**Independent access technique**. RAID levels 4 to 6 use independent access technique, where each member disk operates independently, so that separate I/O requests can be satisfied in parallel
* *Usage*.
    * Suitable for applications with high I/O request rates
    * Less suited for applications with high data transfer rates

**Features**.
* *Data stripping*. RAID 4 to 6 use large strip sizes
* *Parity bits*. In RAID 4, bit-by-bit parity strip is calculated across corresponding strips on each data disk

    $\to$ The parity bits are then stored in the corresponding strip on the parity disk
    * *Explain*. Assume that there are $N+1$ disks and disk $N$ is the parity disk, then

        $$X_N(i)=X_0(i)\oplus X_1(i) \oplus \dots X_{N-1}(i)$$
* *Write penalty*. 
    * RAID 4 involves a write penalty when an I/O write request of small size is performed
        * *Explain*. 
            * Each time a write occurs, the array management software must update the user data and the corresponding parity bits
                * *Example*. If we are writing to $X_1(i)$ a value $X_1'(i)$, then the new parity bits $X_N'(i)$ is given by

                    $$X_N'(i)=X_N(i) \oplus X_1(i) \oplus X_1'(i)$$
            * Thus, to calculate $X_N'(i)$, the array management software must read $X_N(i)$ and $X_1(i)$

                $\to$ Each strip write involves two reads and two writes
    * When a larger size I/O write involving strips on all disk drives

        $\to$ Parity is easily computed by calculation using only the new data bits
        * *Consequence*. The parity drive can be updated in parallel with the data drives and there are no extra reads or writes

### RAID 5
**Idea**. Similar to RAID 4 but distribute the parity strips across all disks
* *Explain*. For an $n$-disk array, the parity strip is on a different disk for the first $n$ strips, and the pattern then repeats
* *Consequence*. Avoid potential I/O bottleneck as in RAID 4

### RAID 6
**Idea**. Two different parity calculations are carried out and stored in separate blocks on different disks

$\to$ A RAID 6 array, whose user data require $N$ disks, consists of $N+2$ disks
* *Consequence*. It is still possible to regenerate data even if two disks containing user data fail

**Pros and cons**.
* *Pros*. Extremely high data availability, i.e. 3 disks would have to fail within mean-time-to-repair (MTTR) to cause data to be lost
* *Cons*. RAID 6 incurs a substantial write penalty, i.e. each write affects two parity blocks

### Usage of RAID algorithms
<div style="text-align:center">
    <img src="https://i.imgur.com/RXrt9Nv.png">
    <figcaption>RAID usages</figcaption>
</div>

<div style="text-align:center">
    <img src="https://i.imgur.com/Ab4v4wl.png">
    <figcaption>RAID usages</figcaption>
</div>

## Solid state drives
**Solid state drives (SSD) and hard disk drives (HDD)**. One of the most significant developments in computer architecture in recent years is the increasing use of SSDs to complement or even replace HDDs
* *"Solid state" term*. Refer to electronic circuitry built with semiconductors
* *Solid state drive*. A memory device made with solid state components, which can be used as a replacement to a hard disk drive

### Flash memory
**Flash memory**. A type of semiconductor nonvolatile memory, which erases data in units called blocks and rewrites data at the byte level 
* *Usage*. Used for electronic products, e.g. smart phones, GPS devices, MP3 players, etc.
* *Flash memory to replace HDDs*. In recent years, the cost and performance of flash memory has evovled to the point where it is feasible to use flash memory drives to replace HDDs

**Basic operations of a flash memory**. 

<div style="text-align:center">
    <img src="https://i.imgur.com/oUcJ9L5.png">
    <figcaption>Flash memory operation</figcaption>
</div>

* *Transistor structure*. we can think of a transistor as a pipe, through which electricity can flow as though it is water
    * *Source*. An end of the pipe, where the water flows in
    * *Drain*. Another end of the pipe, where the water flows out
    * *Contorl gate*. The component blocking the pipe
        * When the gate is closed, the pipe is shut off, i.e. no electricty can flow and the transistor is off

            $\to$ In this state, the transistor stores a zero
        * When the gate is opened, electricity flows, the transistor is on

            $\to$ In this state, the transistor stores a one
    * *Floating gate*. When the gate opens, some electricity leaks up the first gate and stay there, in between the control and the floating gates
* *Transistor operation*. Transistors exploit the properties of semiconductors

    $\to$ A small voltage applied to the gate can be used to control the flow of a large current between the source and the drain
* *Floating gate*. Another gate added to the transistor
    * *"Floating gate"*. This term is due to the fact that the gate is insulated by a thin oxide layer
    * *Binary-1 state*. Initially, the floating gate does not interfere with the operation of the transistor

        $\to$ In this state, the cell is deemed to represent bianry 1
    * *Binary-0 state*. Applying a large voltage across the oxide layer causes electrons to tunnel through it and become trapped on the floating gate, where they remain even if the power is disconnected

        $\to$ In this state, the cell is deemed to represent binary 0
    * *State transition*. Apply a large voltage in the opposite direction removes the electrons from the floating gate, returning to a state of binary 1
* *Cell reading*. The state of the cell can be read by using external circuitry to test whether the transistor is working or not

**Types of flash memory**. 
* *NOR flash memory*. The basic of access is a bit, and the logical organization resembles a NOR logic device
    * *Pros*. Provide high-speed random access, i.e. it can read and write data to specific locations, and can reference and retrieve a single byte
    * *Usage*. Store cell phone OS code, and on Windows computers for the BIOS program running at startup
* *NAND flash memory*. The basic unit is 16 or 32 bits, and the logical organization resembles NAND devices
    * *Pros*. Higher bit density than NOR, and greater write speed
    * *Cons*. There is no random-access external address bus

        $\to$ The data must be read on a blockwise basis, i.e. page access, where each block holds hundreds to thousands of bits
    * *Usage*. Used in USB flash drives, memory cards, e.g. in digital cameras, MP3 players, etc., and in SSDs

### SSD compared to HDD

<div style="text-align:center">
    <img src="https://i.imgur.com/Pqg1yum.png">
    <figcaption>Comparison of SSDs and HDDs</figcaption>
</div>

**Advantages of SSDs over HDDs**.
* *High-performance input/output operations per second (IOPS)*. Significantly increases performance I/O subsystems
* *Durability*. Less susceptible to physical shock and vibration
* *Long lifespan*. SSDs are not susceptible to mechanical wear
* *Lower power consumption*. SSDs use as little as 2.1W of power per drive, considerably less than comparable-size HDDs
* *Quieter and cooler running capability*. Less floor space required, lower energy costs, and a greener enterprise
* *Lower access time and latency rates*. Over 10 times faster than the spinning disks in an HDD

**Advantages of HDDs over SSDs**. Enjoy a cost-per-bit advantage and a capacity advantage

>**NOTE**. These differences are shrinking

### SSD organization

**General view of the common architectural system component associated with a SSD**.

<div style="text-align:center">
    <img src="https://i.imgur.com/kmhFjXV.png">
    <figcaption>Solid state drive architecture</figcaption>
</div>

**SSD operation**.
1. The OS invokes file system software to access data on the disk
2. The file syste, in turn, invokes I/O driver software
3. The I/O driver software provides host access to the particular SSD product

**SSD components**.
* *SSD interface to host system*. The interface component refers to the physical and electrical interface between the host processor and the SSD peripheral device
    * *Inteface type*. If the device is an internal hard drive, a common interface is PCI. For external devices, one common interface is USE
* *Controller*. Provide SSD device level interfacing and firmware execution
* *Addressing*. Logic which performs the selection function across the flash memory components
* *Data buffer / cache*. High-speed RAM memory components used for speed matching and to increased data throughput
* *Error correction*. Logic for error detection and correction
* *Flash memory components*. Individual NAND flash chips

### Practical issues
**Performance degradation**. SSD performance has a tendency to slow down as the device is used
* *Explain*.
    * *Data storage and access*.
        * *Data storage*. Files are stored on disk as a set of pages, typically 4KB in length, which are not necessarily, and indeed not typically, stored as a continuous set of pages on the disk
        * *Data access*. Flash memory is accessed in blocks, with a typically block size of 512 KB
            
            $\to$ There are typically 128 pages per block
    * *Steps to write a page onto a flash memory*.
        1. The entire block must be read from the flash memory, and placed in a RAM buffer

            $\to$ The appropriate page in the RAM buffer is updated
        2. Before the block can be written back to flash memory, the entire block of flash memory must be erased
            * *Explain*. It is not possible to erase just one page of the flash memory
        3. The entire block from the buffer is now written back to the flash memory
    * *Writing a file to a flash memory* When a flash drive is relatively empty and a new file is created

        $\to$ The pages of that file are written onto the drive continuously, so that one or only a few blocks are affected
* *Problem*. Overtime, due to the way virtual memory works, files become fragmented, with pages scattered over multiple blocks

    $\to$ As the drive become more occupied, there is more fragmentation, so the writing of a new file can affect multiple blocks
    * *Consequence*. The writing of multiple pages from one block becomes slower, the more fully occupied the disk is
* *Solutions by manufacturers*. 
    * *Option 1*. Set aside a substantial portion of the SSD as extra space for write operations, i.e. over-provisioning

        $\to$ Then erase inactive pages during idle time used to defragment the disk
    * *Option 2*. Use the TRIM command, i.e. allow an OS to inform a SSD which blocks of data are no longer considered in use and can be wiped internally

**Maximum number of writes**. A flash memory becomes unuseable after a certain number of writes
* *Explain*. As flash cells are stressed, they lose their ability to record and retain values
    * *Typical limit*. 100,000 writes
* *Solutions*.
    * *Option 1*. Front-ending the flash with a cache to delay and group write operations, using wear-leveling algorithms which evenly distribute writes across blocks of celss
    * *Option 2*. Sophisticated bad-block management techniques
    * *Option 3*. Deploy SSDs in RAID configurations to further reduce the probability of data loss
    * *Option 3*. Most flash devices are also capable of estimating their own remaining lifetimes so systems can anticipate failure and take preemptive action

## Optical memory
**Compact disk (CD)**. The CD digital audio system is one of the most successful consumer products of all the time
* *CD*. A nonerasable disk which can store more than 60 minutes of audio information on one side
* *Consequence of the success development of CD*. Enable the development of low-cost optical-disk storage technology which has revolutionized computer data storage

<div style="text-align:center">
    <img src="https://i.imgur.com/yZCjfW0.png">
    <figcaption>Optical disk products</figcaption>
</div>

### Compact disk
**Compact disk read-only memory (CD-ROM)**. Both the audio CD and CD-ROM share a similar technology

<div style="text-align:center">
    <img src="https://i.imgur.com/ZIJVYLt.png">
    <figcaption>CD operation</figcaption>
</div>

* *Main difference between CD and CD-ROM*. CD-ROM players are more rugged and have error correction devices to ensure that data are properly transferred from disk to computer
* *Disk material*. Both types of disk are made the same way, i.e. the disk is formed from a resin, e.g. polycarbonate
* *Information record*. Digitally recorded information, either music or computer data, is imprinted as a series of microscopic pits on the surface of the polycarbonate

    <div style="text-align:center">
        <img src="https://i.imgur.com/shtIY5F.png">
        <figcaption>Master disk structure</figcaption>
    </div>

    * *Mechanism*. 
        1. A finely focused, high-intensity laser creates a master disk
        2. The master is used, in turn, to make a die to stamp out copies onto polycarbonate
        3. The pitted surface is then coated with a highly reflective surface, usually aluminum or gold

            $\to$ This shiny surface is protected against dust and scratches by a top coat of clear acrylic
        4. Finally, a label can be silkscreened onto the acrylic
    * *Lands*. The areas between pits, each land is a smooth surface, which reflects the laser light back at higher intensity than pits, which have a somewhat rough surface 
* *Information retrieval from a CD or CD-ROM*. 

    <div style="text-align:center">
        <img src="https://i.imgur.com/yYJ6vJy.png">
        <figcaption>CD pits and lands</figcaption>
    </div>

    1. Information can be retrieved by a low-powered laser housed in an optical-disk player, or drive unit

        $\to$ The laser shines through the clear polycarbonate while a motor spins the disk past it
    2. The intensity of the reflected light of the laser changes as it encounters a pit
        * If the laser falls on a pit, the light scatters and a low intensity is reflected back to the source, due to the rough surface
        * If the laser falls on a land, the light is reflected with high intensity, due to the smooth surface
    3. The change between pits and lands is detected by a photosensor and converted into a digital signal
        * *Explain*. The sensor tests the surface at regular intervals
        * *Bit value representation*.
            * *Bit-1*. At the beginning or end of a pit
            * *Bit-0*. When no change in elevation occurs between intervals
* *Disk tracks*. Recording information in concentric tracks with multiple zoned recording is not optimal

    $\to$ CDs and CD-ROMs do not organize information on concentric tracks, but on a single spiral track, beginning near the center the spiraling out to the outer edge of the disk
    * *Sector length*. Sectors near the outside of the disk are the same length as those near the inside

        $\to$ Information is packed evenly across the disk in segments of the same size
        * *Consequence*. Information are scanned at the same rate by rotating the disk at a variable speed
    * *Constant linear velocity (CLV)*. The pits are read by the laser at a CLV
        * *Explain*. The disk rotates more slowly for access near the outer edge than for those near the center
        * *Consequence*. The capacity of a track and the rotational delay both increase for positions nearer the outer edge of the disk
    * *CD-ROM capacity*. Typically about 680 MB
* *Data organization*. Data on the CD-ROM are organized as a sequence of blocks, each of which consists of the following fields (typically)

    <div style="text-align:center">
        <img src="https://i.imgur.com/5MEvxhQ.png">
        <figcaption>CD pits and lands</figcaption>
    </div>

    * *Sync*. Identify the beginning of a block
        * *Structure*. Consist of 12 bytes, i.e. 1 byte of all 0s, 10 bytes of all 1s, and a byte of all 0s
    * *Header*. Contain the block address and the mode byte
        * *Mode byte value*.
            * *Mode 0*. A blank data field
            * *Mode 1*. There is an ECC and 2048 bytes of data
            * *Mode 2*. There is 2336 bytes of user data without ECC
    * *Data*. User data
    * *Auxiliary*. Additional user data in mode 2, or a 288-byte ECC in mode 1
* *Random access*. With the use of CLV, random access becomes more difficult
    * *Explain*. Locating a specific address involves 
        1. Move the head to the general area, adjust the rotation speed, and read the address
        2. Make minor adjustments to find and access the specific sector
* *Usage*. CD-ROM is appropriate for the distribution of large amounts of data to a large number of users
    * *Explain*. The expense of the initial writing process makes it not appropriate for individualized applications
* *Pros and cons compared with traditional magnetic disks*.
    * *Pros*.
        * Optical disk with information stored on it can be mass replicated inexpensively, while the database on a magnetic disk has to be reproduced by copying one disk at a time using two disk drives
        * The optical disk is removable, allowing the disk to be used for archival storage, while most magnetic disks are nonremovable

            $\to$ The information on nonremovable magnetic disks must be copied to another storage medium before it can be used to store new information
    * *Cons*.
        * Optical disks are read-only and cannot be updated
        * Optical disks have an access time much longer than that of a magnetic disk drive, as much as half a second

**CD recordable (CD-R)**. Developed to accommondate applications, in which only one or a small number of copies of a set of data is required

<div style="text-align:center">
    <img src="https://i.imgur.com/ueMMxQn.png">
    <figcaption>CD-R and CD-ROM</figcaption>
</div>

* *Idea*. Write once and read many, i.e a disk is prepared so that it can be subsequently written once with a laser beam of modest-intensity

    $\to$ With a somewhat more expensive disk controller than for CD-ROM, the customer can write once as well as read the disk
* *Disk medium*. Similar but not identical to that of a CD or CD-FROM
* *Information recording*.
    * *CD or CD-ROM*. Information is recorded by the pitting of the surface of the medium, which changes reflectivity
    * *CD-R*. The medium includes a dye layer, which is used to change reflectivity and is activated by a high-intensity laser

        $\to$ The resulting disk can be read on a CD-R drive or a CD-ROM drive
* *Usage*. Attractive for archival storage of documents and files, since it provides a permanent record of large volumes of user data
* *Differences from CD-ROM*.
    * *CD-ROM*. A CD mass-manufactured by class mastering
        * *Explain*. A metal mold, in which the information is already encoded, is inserted into a plastic molding machine, and copies of the CD with the information are created

            $\to$ This is the cheapest way to copy a CD in quantity

        >**NOTE**. A CD-ROM can be written only once when created, after that it cannot be written any longer but only read

    * *CD-R (writable)*. A burnable CD, i.e. we can burn it individually in our computer CD drive

    >**NOTE**. If the disk color is pure silver, then it is probably a CD-ROM, i.e. we can play it but cannot write to it. If the color is anything through light yello to greenish-blue -purple, then it is a CD-R

**CD rewriteable (CD-RW)**. The CD-RW optical disk can be repeatedly written and overwritten, as with a magnetic disk
* *Phase change*. The only pure optical approach which has proved attractive
    * *Phase change disk*. Use a material, which has two significantly different reflectivities in two different phase states
        * *Amorphous state*. The molecules exhibit a random orientation reflecting light poorly
        * *Crystalline state*. Have a smooth surface which reflects light well
    * *Phase changing*. A beam of laser light can change the material from one phase to the other
* *Primary drawback*. The material eventually and permanently loses its desirable properties
      * *Number of erase cycles for current materials*. Between 500,000 and 1,000,000 cycles
* *Advantages over CD-ROM and CD-R*. 
    * CD-RW can be rewritten and thus used as a true secondary storage

        $\to$ CD-RW competes with magnetic disk
    * Engineering tolerances for optical disks are much less severe than for high-capacity magnetic disks

        $\to$ CD-RW exhibits higher reliability and longer life

### Digital versatile disk (DVD)
**Digital versatile disk (DVD)**. The replacement of the videotape used in video cassette recorders (VCRs) and, more important, the replacement of the CD-ROM in personal computers and servers
* *DVD and videos*. 
    * DVD takes video into the digital age, i.e. it delivers movies with impressive picture quality
    * DVD can be randomly accessed like audio CDs, which DVD machines can also play
* *DVD capacity*. Vast volumes of data can be crammed onto a DVD, currently seven times as much as a CD-ROM
    * *Consequence*. Due to DVD's huge storage capacity and vivid quality

        $\to$ PC games have become more realistic and educational software incorporates more video

**Reasons for DVD's greater capacity than CDs**.
* Bits are packed more closely on a DVD
    * *Examples*.
        * The spacing between loops of a spiral on a CD is $1.6 \mu m$, and the minimum distance between pits along the spiral is $0.834 \mu m$
        * The DVD uses a laser with shorter wavelength and achieves a loop spacing of $0.74 \mu m$, and a minimum distance between pits of $0.4 \mu m$
    * *Consequence*. The result of these improvements is about a seven-fold increase in capacity, i.e. to about 4.7 GB
* The DVD employs a second layer of pits and lands on top of the first layer

    <div style="text-align:center">
        <img src="https://i.imgur.com/bwf3tGr.png">
        <figcaption>CD-ROM and DVD-ROM</figcaption>
    </div>

    * *Idea*. A dual-layer DVD has a semi-reflective layer on top of the reflective layer, and by adjusting focus, the laser in DVD drives can read each layer separately

        $\to$ This technique almost doubles the capacity of the disk to about 8.5 GB
    * *Storage doubling*. The lower reflectivity of the second layer limits its storage capacity so that a full doubling is not achieved
* DVD-ROM can be two-sided, whereas data are recorded on only one side of a CD

    $\to$ This brings total capacity up to 17 GB

### High-definition optical disks
**High-definition (HD) optical disks**. Designed to store high-definition (HD) videos and to provide significantly greater storage capacity to DVDs
* *Higher bit density*. Achieved by using a laser with a shorter wavelength, in blue-violet range
* *Data pits*. Smaller on the HD optical disks compared to DVD, due to shorter laser wavelength

**Disk formats for HD optical disks**.
* *HD DVD*. Can store 15 GB on a single layer on a single side
* *Blu-ray DVD*. Position the data layer on the disk closer to the laser

    $\to$ This enables a tighter focus and less distortion and thus smaller pits and tracks
    
    >**NOTE**. This type of DVD ultimately achieved market dominance

    * *Consequence*. Blu-ray can store 25 GB on a single layer
    * *Blu-ray DVD versions*. read only (BD-ROM), recordable once (BD-R), and rerecordable (BD-RE)

## Magnetic tape
[CONTINUE]

# Appendix
## Concepts
**Physical explanation of words**. 
* *The write mechanism exploits the fact that electricity flowing through a coil
produces a magnetic field*. 
    * *Vietnamese explanation*. Cuộn cảm, hay cuộn từ, là một loại linh kiện điện tử thụ động tạo từ một dây vẫn điện với vài vòng dây quấn, sinh ra từ trường khi có dòng điện chạy qua
        
        $\to$ Khi cho dòng điện 1 chiều chạy qua cuộn cảm, dòng điện sẽ sinh ra một từ trường có cường độ và chiều không đổi, ứng với chiều và cường độ dòng điện
* *The read mechanism exploits the fact that a magnetic field moving relative to a coil produces an electrical current in the coil*.
    * *Vietnamese explanation*. Đây thực chất là hiện tượng cảm ứng điện từ, i.e. hiện tượng hình thành một điện áp trên một vật dẫn khi vật dẫn đó được đặt trong một từ trường biến thiên

        $\to$ Thí nghiệm này được thực hiện bởi Micheal Faraday, người đã chứng tỏ bằng thực nghiệm rằng từ trường có thể sinh ra dòng điện

**Transaction-oriented environment**.
* *Transaction processing*. Information processing in computer science, which is divided into individual, indivisible operations called transactions
    * *Success and failures of a transaction*. Each transaction must succeed or fail as a complete unit, and can never be only partially complete